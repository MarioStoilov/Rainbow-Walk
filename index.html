<!DOCTYPE html>
<html>
    <head>
        <title>Rainbow Marshmellows</title>
    </head>
    <body>
        <h1><a style="text-decoration: none"><font color=#ff0000>R</font><font color=#f2260c>a</font><font color=#e54b19>i</font><font color=#d86e26>n</font><font color=#cc8f33>b</font><font color=#bfad3f>o</font><font color=#b2c74c>w</font> <font color=#99ed66>M</font><font color=#8cf872>a</font><font color=#7ffe7f>r</font><font color=#72fe8c>s</font><font color=#66f899>h</font><font color=#59eca5>m</font><font color=#4cdcb2>e</font><font color=#3fc6bf>l</font><font color=#33accc>l</font><font color=#268ed8>o</font><font color=#196ce5>w</font><font color=#0c49f2>s</font></a></h1>
		<script src="libs/jquery-1.9.1/jquery.js"></script>
        <script src="libs/jqueryui-1.10.3/jquery-ui.js"></script>
        <script src="libs/bootstrap.min.js"></script>

        <script src="controls.js"></script>
        <script src="rainbowEngine.js"></script>
		<script src="progress.js"></script>
        <LINK href="libs/bootstrap.min.css" rel="stylesheet" type="text/css">
		<link rel="stylesheet" href="piano.css"/>
		<LINK href="rainbow.css" rel="stylesheet" type="text/css">
		<link rel="stylesheet" href="progress.css"/>
      

		<ul class="nav nav-tabs" id="myTab">
		  <li class="active"><a href="#colorwalk" onclick="initColor()">Color walk</a></li>
		  <li><a href="#piano" onclick="initPiano()">Piano</a></li>
		  <li><a href="#progress" onclick="initProgress()">Progress</a></li>
		</ul>

		    <div id='content' class="tab-content">
		      <div class="tab-pane active" id="colorwalk">
		      		<img src="colour-space-CMYK.png" id="hint">
        	<div id="container">

	            <table id="gameTable">    
	            </table>
	            <div id="player"></div>
       		</div>
			<h2>Go to the white square with black color</h2>
		    <div id="rainbow-status-div"></div>


        <script>
            $(document).ready(function () 
            {
                var i=0;
                var j=0;
                var playerColor =0;
                playerColor= engine.start();
				var complete=false;

                positionPlayer(i,j);
                function positionPlayer(i, j)
                {
                    var targetCell = document.getElementById("game-cell-"+j+"-"+i);
					if (!targetCell)
					{
						return;
					}
                    var player = document.getElementById("player");
                    var left = targetCell.offsetLeft;
                    var top = targetCell.offsetTop;
                    var color = engine.movePlayer(i,j);
                    var red = (color & (1 << 0))!=0;
                    var green = (color & (1 << 1))!=0;
                    var blue = (color & (1 << 2))!=0;

                    player.setAttribute("style", "left: "+left+"px; top: "+top+"px;"+
                    "background-color: rgb("+red*255+","+green*255+","+blue*255+");");
					if (i==matrixSize-1 && j==matrixSize-1)
					{
						if (color==0)
						{
							complete=true;
							var statusDiv = document.getElementById("rainbow-status-div");
							statusDiv.innerHTML ="Congratulations";
							progress.completeRainbow();
						}
					}
                }
                $("body").on("moveCommand", function(e)
				{
					if (complete || activeTab!=0)
					{
						return;
					}
                    switch(e.direction) {
                        case "up":
                           j-1>=0 ? j-- : j = 0;
                           break;
                        case "down":
                           j+1<engine.matrixSize ? j++ : j=engine.matrixSize-1;
                           break;
                        case "left":
                           i-1>=0 ? i-- : i = 0;
                           break;
                        case "right":
                           i+1<engine.matrixSize ? i++ : i=engine.matrixSize-1;
                           break;   
                    }
                    positionPlayer(i,j);
                });
            });

            var matrix = [];
            for(var i=0; i<9; i++) {
                matrix[i] = [];
                for(var j=0; j<9; j++) {
                    matrix[i][j] = undefined;
                }
            }

            
      		  </script>
		      </div>
		      
<!-------------------------------------------------------------------------------------------->
		      <div class="tab-pane" id="piano">
		        <audio id="sound-A2" src="samples/A2.ogg" preload="auto"></audio>
				    <audio id="sound-Bb2" src="samples/Bb2.ogg" preload="auto"></audio>
				    <audio id="sound-B2" src="samples/B2.ogg" preload="auto"></audio>
				    <audio id="sound-Ab3" src="samples/Ab3.ogg" preload="auto"></audio>
				    <audio id="sound-A3" src="samples/A3.ogg" preload="auto"></audio>
				    <audio id="sound-Bb3" src="samples/Bb3.ogg" preload="auto"></audio>
				    <audio id="sound-B3" src="samples/B3.ogg" preload="auto"></audio>
				    <audio id="sound-C3" src="samples/C3.ogg" preload="auto"></audio>
				    <audio id="sound-Db3" src="samples/Db3.ogg" preload="auto"></audio>
				    <audio id="sound-D3" src="samples/D3.ogg" preload="auto"></audio>
				    <audio id="sound-Eb3" src="samples/Eb3.ogg" preload="auto"></audio>
				    <audio id="sound-E3" src="samples/E3.ogg" preload="auto"></audio>
				    <audio id="sound-F3" src="samples/F3.ogg" preload="auto"></audio>
				    <audio id="sound-Gb3" src="samples/Gb3.ogg" preload="auto"></audio>
				    <audio id="sound-G3" src="samples/G3.ogg" preload="auto"></audio>
				    <audio id="sound-Ab4" src="samples/Ab4.ogg" preload="auto"></audio>
				    <audio id="sound-A4" src="samples/A4.ogg" preload="auto"></audio>
				    <audio id="sound-Bb4" src="samples/Bb4.ogg" preload="auto"></audio>
				    <audio id="sound-B4" src="samples/B4.ogg" preload="auto"></audio>
				    <audio id="sound-C4" src="samples/C4.ogg" preload="auto"></audio>
				    <audio id="sound-Db4" src="samples/Db4.ogg" preload="auto"></audio>
				    <audio id="sound-D4" src="samples/D4.ogg" preload="auto"></audio>
				    <audio id="sound-Eb4" src="samples/Eb4.ogg" preload="auto"></audio>
				    <audio id="sound-E4" src="samples/E4.ogg" preload="auto"></audio>
				    <audio id="sound-F4" src="samples/F4.ogg" preload="auto"></audio>
				    <audio id="sound-Gb4" src="samples/Gb4.ogg" preload="auto"></audio>
				    <audio id="sound-G4" src="samples/G4.ogg" preload="auto"></audio>
				    <audio id="sound-C5" src="samples/C5.ogg" preload="auto"></audio>
				    <div class="piano">
				      <noscript class="piano-javascript">This program requires Javascript and HTML5 Audio support.</noscript>
				      <div class="piano-container">
				        <div class="piano-keys">
				     <!--      <div class="piano-white piano-A2"></div>
				          <div class="piano-black"><div class="piano-black-raised piano-Bb2"></div></div> -->
				        <!--   <div class="piano-white piano-B2"></div> -->
				          <div class="piano-white piano-C3"></div>
				          <div class="piano-black"><div class="piano-black-raised piano-Db3"></div></div>
				          <div class="piano-white piano-D3"></div>
				          <div class="piano-black"><div class="piano-black-raised piano-Eb3"></div></div>
				          <div class="piano-white piano-E3"></div>
				          <div class="piano-white piano-F3"></div>
				          <div class="piano-black"><div class="piano-black-raised piano-Gb3"></div></div>
				          <div class="piano-white piano-G3"></div>
				          <div class="piano-black"><div class="piano-black-raised piano-Ab3"></div></div>
				          <div class="piano-white piano-A3"></div>
				          <div class="piano-black"><div class="piano-black-raised piano-Bb3"></div></div>
				          <div class="piano-white piano-B3"></div>
				          <div class="piano-white piano-C4"></div>
				          <div class="piano-black"><div class="piano-black-raised piano-Db4"></div></div>
				          <div class="piano-white piano-D4"></div>
				          <div class="piano-black"><div class="piano-black-raised piano-Eb4"></div></div>
				          <div class="piano-white piano-E4"></div>
				          <div class="piano-white piano-F4"></div>
				          <div class="piano-black"><div class="piano-black-raised piano-Gb4"></div></div>
				          <div class="piano-white piano-G4"></div>
				          <div class="piano-black"><div class="piano-black-raised piano-Ab4"></div></div>
				          <div class="piano-white piano-A4"></div>
				          <div class="piano-black"><div class="piano-black-raised piano-Bb4"></div></div>
				          <div class="piano-white piano-B4"></div>
				<!--           <div class="piano-white piano-C5"></div> -->
				        </div>
				      </div>
				    </div>
				    <script src="piano.js"></script>
			    <h2 style="display: inline-block; float: left;">
			    	Play the melody
		    	</h2>
				  <div class="melody-container">
				  	<div id="piano-status-melody"></div>
				  	<button id="piano-play-button" onclick="pianoClass.playMelody()">Play melody</button>
				  </div>
		      </div>
		      <div class="tab-pane" id="progress">
				  <img id="progress-rainbow-walk" class="progress-image" src="images/rainbow-walk.png">
				  <img id="progress-piano" class="progress-image" src="images/piano.png">
		      </div>
		      <div class="tab-pane" id="settings"></div>
		    </div>    

 		<script>

			$('#myTab a').click(function (e) {
			  e.preventDefault()
			  $(this).tab('show')
			});
			progress.bindProgress();

			var activeTab = 0;

			function initColor()
			{
				activeTab=0;
			}

			function initPiano()
			{
				activeTab=1;
			}

			function initProgress()
			{
				activeTab=2;
			}
		</script>
    </body>
</html>

